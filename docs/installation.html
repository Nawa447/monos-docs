<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Build MonOS</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header><h1>Compilation de l'ISO</h1></header>
    <nav>
        <a href="index.html">Accueil</a>
        <a href="installation.html" class="active">Installation</a>
        <a href="yubikey.html">Sécurité</a>
    </nav>

    <div class="step">
        <h3>1. Installation de live-build</h3>
        <pre>sudo apt update
sudo apt install live-build</pre>
        <div class="explanation">
             - `apt update` : met à jour la liste des paquets disponibles<br>
             - `apt install live-build` : installe l’outil officiel Debian pour créer des ISO live
        </div>
    </div>

    <div class="step">
        <h3>2. Création du projet et initialisation</h3>
        <pre>mkdir mon-os
cd mon-os
lb config</pre>
        <div class="explanation">
            Prépare le dossier de travail `mon-os` et initialise l’arborescence de build (`config/`).
        </div>
    </div>

    <div class="step">
        <h3>3. Choisir la version de Debian</h3>
        <pre>lb config \
  --distribution bookworm \
  --archive-areas "main contrib non-free non-free-firmware" \
  --binary-images iso-hybrid</pre>
        <div class="explanation">
            - `--distribution bookworm` : version Debian 12<br>
            - `--archive-areas` : inclut firmware et pilotes matériels<br>
            - `--binary-images iso-hybrid` : ISO bootable USB + VM
        </div>
    </div>

    <div class="step">
        <h3>4. Ajouter des paquets au système</h3>
        <pre>mkdir -p config/package-lists
nano config/package-lists/base.list.chroot</pre>
        <div class="explanation">
            Exemple de paquets à installer :
            <pre>vim
curl
git
sudo
openssh-server
network-manager</pre>
        </div>
    </div>

    <div class="step">
        <h3>5. Ajouter des fichiers personnalisés</h3>
        <pre>mkdir -p config/includes.chroot/etc/skel
nano config/includes.chroot/etc/skel/.bashrc</pre>
        <div class="explanation">
            Ce fichier `.bashrc` sera présent pour tous les nouveaux utilisateurs de l’OS final.
        </div>
    </div>

    <div class="step">
        <h3>6. Génération de l’ISO</h3>
        <pre>sudo lb build</pre>
        <div class="explanation">
            Télécharge tous les composants Debian et crée le fichier `live-image-amd64.hybrid.iso`.
        </div>
    </div>
</body>
</html>
